(()=>{"use strict";var e=document.querySelector(".profile__edit-button"),t=document.querySelector(".profile__add-button"),r=document.querySelector(".profile__name"),n=document.querySelector(".profile__description"),o=document.querySelector('.popup[type="picture"]'),c=o.querySelector(".popup__picture"),a=document.querySelectorAll(".popup__close-button"),u=document.querySelectorAll(".popup"),i=document.querySelector('.popup[type="profile"]'),l=document.querySelector('.popup[type="card"]');function p(e){var t=document.querySelector(".popup_opened");"Escape"===e.key&&d(t)}function s(e){e.classList.add("popup_opened"),document.addEventListener("keydown",p)}function d(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",p)}var m=document.querySelector(".card-template").content,v=document.querySelector(".elements");function f(e){var t=m.cloneNode(!0);!function(e,t){var r=e.querySelector(".card__picture");r.src=t.link,r.alt=t.name,r.addEventListener("click",(function(){s(o),c.src=r.src,c.alt=r.alt,o.querySelector(".popup__picture-description").textContent=t.name})),e.querySelector(".card__heading").textContent=t.name,e.querySelector(".card__button").addEventListener("click",(function(e){e.target.classList.toggle("card__button_liked")})),e.querySelector(".card__delete-button").addEventListener("click",(function(e){e.target.closest(".card").remove()}))}(t,e),v.prepend(t)}function y(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove(r)):(t.disabled=!0,t.classList.add(r))}function _(e,t,r,n){var o=e.querySelector(t);y(Array.from(e.querySelectorAll(r)),o,n)}var S,q=".popup__form",k=".popup__form-field",L=".popup__form-submit",g="popup__form-submit_disabled";[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach(f),a.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return d(t)}))})),u.forEach((function(e){e.addEventListener("click",(function(t){t.target===e&&d(e)}))})),t.addEventListener("click",(function(){s(l),_(l.querySelector(q),L,k,g)})),e.addEventListener("click",(function(){s(i);var e=i.querySelector(q);e.name.value=r.innerText,e.description.value=n.innerText,_(e,L,k,g)})),i.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),r.innerText=e.target.name.value,n.innerText=e.target.description.value,d(i)})),l.querySelector(".popup__form").addEventListener("submit",(function(e){e.preventDefault(),f({name:e.target.name.value,link:e.target.link.value}),e.target.name.value="",e.target.link.value="",d(l)})),S={formSelector:q,inputSelector:k,submitButtonSelector:L,inactiveButtonClass:g,inputErrorClass:"popup__input_error",errorClass:"popup__error_active"},Array.from(document.querySelectorAll(S.formSelector)).forEach((function(e){var t=Array.from(e.querySelectorAll(S.inputSelector)),r=e.querySelector(S.submitButtonSelector);y(t,r,S.inactiveButtonClass),t.forEach((function(n){n.addEventListener("input",(function(o){y(t,r,S.inactiveButtonClass),function(e,t,r,n){t.validity.valid?function(e,t,r,n){var o=e.querySelector(".".concat(t.name,"-input-error"));t.classList.remove(r),o.classList.remove(n),o.textContent=""}(e,t,r,n):function(e,t,r,n,o){var c=e.querySelector(".".concat(t.name,"-input-error"));t.classList.add(n),c.textContent=r,c.classList.add(o)}(e,t,t.validationMessage,r,n)}(e,n,S.inputErrorClass,S.errorClass)}))}))}))})();